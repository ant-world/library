<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Vue3 | 蚂蚁图书馆</title><meta name="keywords" content="Vue"><meta name="author" content="蚂蚁"><meta name="copyright" content="蚂蚁"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="创建工程 vue-cli 创建 vue-cli 版本需要 4.5.0 以上版本 vue 版本查看 vue -V 创建 目录下执行 vue create 项目名 选择 vue3     vite 创建 npm init vite-app 项目名 作用：使用 vite-app（包） 创建项目 等同于：npx create-vite-app 项目名 使用 npx 工具 补全包名 create-vite-">
<meta property="og:type" content="article">
<meta property="og:title" content="Vue3">
<meta property="og:url" content="http://updownqs.tk/2023/02/05/Vue3/index.html">
<meta property="og:site_name" content="蚂蚁图书馆">
<meta property="og:description" content="创建工程 vue-cli 创建 vue-cli 版本需要 4.5.0 以上版本 vue 版本查看 vue -V 创建 目录下执行 vue create 项目名 选择 vue3     vite 创建 npm init vite-app 项目名 作用：使用 vite-app（包） 创建项目 等同于：npx create-vite-app 项目名 使用 npx 工具 补全包名 create-vite-">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7">
<meta property="article:published_time" content="2023-02-05T04:06:42.000Z">
<meta property="article:modified_time" content="2023-04-23T14:51:23.950Z">
<meta property="article:author" content="蚂蚁">
<meta property="article:tag" content="Vue">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://updownqs.tk/2023/02/05/Vue3/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"BPOITDTP8G","apiKey":"cc1beffb49df9f29e989212825ed74b5","indexName":"hexo","hits":{"per_page":6},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Vue3',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-04-23 22:51:23'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/self/Kimbiedark.css"><link rel="stylesheet" href="/self/my.css"><meta name="generator" content="Hexo 6.2.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">32</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">16</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首頁</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">蚂蚁图书馆</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首頁</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">Vue3</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-02-05T04:06:42.000Z" title="发表于 2023-02-05 12:06:42">2023-02-05</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-04-23T14:51:23.950Z" title="更新于 2023-04-23 22:51:23">2023-04-23</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%BC%96%E7%A8%8B/">编程</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Vue3"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div><article class="post-content" id="article-container"><h1 id="创建工程"><a href="#创建工程" class="headerlink" title="创建工程"></a>创建工程</h1><hr>
<h2 id="vue-cli-创建"><a href="#vue-cli-创建" class="headerlink" title="vue-cli 创建"></a>vue-cli 创建</h2><ol>
<li>vue-cli 版本需要 4.5.0 以上版本</li>
<li>vue 版本查看 <code>vue -V</code></li>
<li>创建<ol>
<li>目录下执行 <code>vue create 项目名</code></li>
<li>选择 <code>vue3</code></li>
</ol>
</li>
</ol>
<hr>
<h2 id="vite-创建"><a href="#vite-创建" class="headerlink" title="vite 创建"></a>vite 创建</h2><ol>
<li><code>npm init vite-app 项目名</code><ol>
<li>作用：使用 <code>vite-app（包）</code> 创建项目</li>
<li>等同于：<code>npx create-vite-app 项目名</code><ol>
<li>使用 <code>npx 工具</code></li>
<li>补全包名 <code>create-vite-app</code></li>
</ol>
</li>
</ol>
</li>
<li>安装依赖：<code>npm i</code></li>
<li>执行：<code>npm run dev</code></li>
</ol>
<blockquote>
<p>npx 工具</p>
</blockquote>
<ol>
<li>作用：执行Node软件包的工具</li>
<li>执行方式（默认）<ol>
<li>检查是否有要执行的包（create-vite-app）</li>
<li>若存在，则执行此包</li>
<li>若不存在，则表示未安装，npx 将安装此包（create-vite-app），并执行它</li>
</ol>
</li>
</ol>
<hr>
<h1 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h1><hr>
<h2 id="main-js"><a href="#main-js" class="headerlink" title="main.js"></a>main.js</h2><blockquote>
<p>vue2：引入的是 <code>vue 构造函数</code></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span><br><br><span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;<br>    <span class="hljs-attr">render</span>:<span class="hljs-function"><span class="hljs-params">h</span> =&gt;</span> <span class="hljs-title function_">h</span>(<span class="hljs-title class_">App</span>)<br>&#125;)<br><span class="hljs-comment">// 挂载</span><br>vm.$mount(<span class="hljs-string">&#x27;#app&#x27;</span>)<br></code></pre></td></tr></table></figure>
<blockquote>
<p>vue3：引入的是 <code>createApp 工厂函数</code></p>
</blockquote>
<p><code>app 实例</code> 和 <code>vm 实例</code> 区别：<code>app 实例</code> 更精简</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span><br><br><span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)<br><span class="hljs-comment">// 挂载</span><br>app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&#x27;#app&#x27;</span>)<br></code></pre></td></tr></table></figure>

<hr>
<h1 id="规范"><a href="#规范" class="headerlink" title="规范"></a>规范</h1><hr>
<h2 id="vue-文件"><a href="#vue-文件" class="headerlink" title=".vue 文件"></a>.vue 文件</h2><hr>
<h3 id="template-模板"><a href="#template-模板" class="headerlink" title="template 模板"></a>template 模板</h3><p><code>template</code> 模板结构中可以不用跟标签，可以多个标签同时作为 <code>template</code> 子元素</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// .vue 文件</span><br><br>&lt;template&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br>&lt;/template&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span>&#123;...&#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span></span><br><span class="language-xml">    ...</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<hr>
<h1 id="API"><a href="#API" class="headerlink" title="API"></a>API</h1><p>官方资料：<a target="_blank" rel="noopener" href="https://cn.vuejs.org/api/">https://cn.vuejs.org/api/</a></p>
<hr>
<h2 id="组合式-API-Composition"><a href="#组合式-API-Composition" class="headerlink" title="组合式 API (Composition)"></a>组合式 API (Composition)</h2><mark class="hl-label red">说明</mark> 
<p>官方资料：<a target="_blank" rel="noopener" href="https://cn.vuejs.org/guide/extras/composition-api-faq.html">https://cn.vuejs.org/guide/extras/composition-api-faq.html</a></p>
<ol>
<li>是一系列API的集合，可以按需引入需要的API</li>
<li>使用函数而不是声明选项的方式书写 Vue 组件</li>
<li>需要配合 <code>setup() 函数</code> 或 <code>&lt;script setup&gt; 标签</code> 使用</li>
</ol>
<mark class="hl-label red">优势</mark> 
<p>官方资料：<a target="_blank" rel="noopener" href="https://cn.vuejs.org/guide/extras/composition-api-faq.html">https://cn.vuejs.org/guide/extras/composition-api-faq.html</a></p>
<ol>
<li>可以封装 <strong>组合式函数</strong>，实现更好的逻辑复用</li>
<li>选项式 API，功能和数据在代码中分离，不方便管理。组合式 API 可以根据用户 <strong>自由组织代码</strong></li>
<li>组合式 API 主要利用基本的变量和函数，因此 <strong>支持 TypeScript 语法</strong></li>
<li>可以 <strong>压缩代码体积</strong><ol>
<li>因为本地变量的名字可以被压缩，但对象的属性名则不能。</li>
<li><code>&lt;script setup&gt;</code> 中都是变量</li>
<li>选项式 API 的 <code>this</code> 是对象</li>
</ol>
</li>
</ol>
<hr>
<h2 id="setup"><a href="#setup" class="headerlink" title="setup( )"></a>setup( )</h2><p>官方资料：<a target="_blank" rel="noopener" href="https://cn.vuejs.org/api/">https://cn.vuejs.org/api/</a></p>
<ol>
<li>类型：生命钩子函数，Vue3 中的一个新配置项</li>
<li>作用：数据、方法等等，均要配置在 <code>setup( )</code> 中定义</li>
<li>执行时机：在 <code>beforeCreate</code> 之前执行一次</li>
<li><code>this</code>：为 <code>undefined</code></li>
<li>参数：<ol>
<li><code>props</code>（参数1）：代理对象，父组件自定义的属性，并且子组件进行 <code>props</code> 接收的属性</li>
<li><code>context</code>（参数2）：上下文<ol>
<li><code>attrs</code>：父组件自定义的属性，但是子组件未进行 <code>props</code> 接收的属性，相当于 <code>vue2 中的 this.$attrs</code></li>
<li><code>slots</code>：接收的插槽内容，相当于 <code>vue2 中的 this.$slots</code><ol>
<li>值：值为代理对象，属性为调用子组件时定义的各子元素（插入插槽的元素）</li>
<li>匿名插槽为 <code>default</code></li>
<li>调用具名插槽需要使用 <code>v-slot:name值</code></li>
</ol>
</li>
<li><code>emit</code>：方法，用来触发自定义事件<ol>
<li>先通过 <code>emits</code> 配置项接收自定义事件（类似于 <code>props</code>）(不接受也能用会有提示)</li>
<li>触发自定义事件 <code>context.emit(&quot;事件名&quot;, 参数1, 参数2)</code></li>
<li>除了 <code>setup( )</code> 其他地方触发自定义事件 <code>this.$emit(&quot;事件名&quot;, 参数1, 参数2)</code></li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li>返回值：<ol>
<li>返回对象：对象中的属性、方法在模板中可以直接使用。（未定义为响应数据只能展示，模板中不能动态修改）</li>
<li>返回渲染函数：可以自定渲染内容。（不常用）<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;template&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>小明<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>去哪里<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br>&lt;/template&gt;<br><br><span class="hljs-keyword">import</span> &#123; h &#125; form <span class="hljs-string">&quot;vue&quot;</span><br><span class="hljs-keyword">import</span> &#123; ref &#125; form <span class="hljs-string">&quot;vue&quot;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span>&#123;<br>    <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-keyword">let</span> name = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&quot;xx&quot;</span>)<br>        <span class="hljs-keyword">let</span> age = <span class="hljs-title function_">ref</span>(<span class="hljs-number">16</span>)<br><br>        <span class="hljs-keyword">function</span> <span class="hljs-title function_">ff</span>(<span class="hljs-params"></span>)&#123;<br>            name.<span class="hljs-property">value</span> = <span class="hljs-string">&quot;小刚&quot;</span><br>            age.<span class="hljs-property">value</span> = <span class="hljs-number">20</span><br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">lot</span>(name,name.<span class="hljs-property">value</span>)<br>        &#125;<br>        <span class="hljs-comment">// 返回对象</span><br>        <span class="hljs-keyword">return</span> &#123;<br>            name,<br>            age,<br>            ff<br>        &#125;<br>        <span class="hljs-comment">// 返回渲染函数</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">h</span> =&gt;</span> <span class="hljs-title function_">h</span>(<span class="hljs-string">&quot;h1&quot;</span>,<span class="hljs-string">&quot;yy&quot;</span>) <span class="hljs-comment">// 页面最终显示一个是yy内容的 h1 标签</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ol>
</li>
</ol>
<blockquote>
<p>注意事项</p>
</blockquote>
<ol>
<li>尽量不与 vue2 配置混用（data、methods）<ol>
<li>vue2 配置（data、methos、computed…）中可以访问到 setup 中返回的属性和方法</li>
<li>但是 setup 中不能访问到 vue2 配置（data、methods、computed…）</li>
<li>如果有重名，setup 优先</li>
</ol>
</li>
<li>setup 不能是一个 async 函数，因为这样 return 返回值就不是一个普通对象了，模板看不到 return 对象中的属性<ul>
<li>如果组件被引用，且父组件中使用了异步引入，并且使用 <code>&lt;suspense&gt;</code> 组件进行了处理，则子组件 <code>setup</code> 可以定义为 <code>async</code> 函数，return 返回一个 <code>proxy</code> 对象，对象成功值为响应数据</li>
</ul>
</li>
</ol>
<hr>
<h3 id="定义响应数据"><a href="#定义响应数据" class="headerlink" title="定义响应数据"></a>定义响应数据</h3><hr>
<h4 id="ref"><a href="#ref" class="headerlink" title="ref( )"></a>ref( )</h4><blockquote>
<p>作用</p>
</blockquote>
<p>将基本类型数据包装成为可以进行响应式的对象 <code>响应式引用</code>，使得 <code>该对象</code> 的 <code>内部值</code> 变化能够自动触发视图更新</p>
<blockquote>
<p>返回值</p>
</blockquote>
<ul>
<li>返回值的称呼：<mark class="hl-label red">响应式引用</mark>  或 <mark class="hl-label red">响应式值</mark> </li>
<li>返回值称呼解释：<ol>
<li><code>响应式引用</code> 这个词可以更明确地表达出这个对象的作用，即是一个引用（对象），指向一个基本类型的值，而这个引用具有响应式的特性。</li>
<li><code>响应式值</code> 这个词则更加强调这个对象所包装的是一个值，而不是一个对象</li>
</ol>
</li>
</ul>
<blockquote>
<p>注意事项</p>
</blockquote>
<ol>
<li><mark class="hl-label pink">类型限制</mark> ：
<ul>
<li>只能使用基本类型数据生成 <code>响应式引用</code>，此 <code>响应式引用</code> 中被包装的基本类型数据就具有响应式能力</li>
<li>也可以包装对象，但是包装对象时底层默认调用的是 <code>reactive 函数</code>，获取此 <code>响应式引用</code> 的内部值，将获取到的是一个 <code>响应式对象</code></li>
</ul>
</li>
<li><mark class="hl-label pink">访问方式</mark> ：
<ol>
<li><mark class="hl-label green">javascript代码中</mark> ：
<ul>
<li>通过 <code>响应式引用</code> 的 <code>value</code> 属性 <code>let a = refobj.value</code> 获取 <code>响应式引用</code> 内部值</li>
</ul>
</li>
<li><mark class="hl-label green">模板中</mark> ：
<ul>
<li>直接使用 <code>响应式引用</code> <code>&#123;&#123; refobj &#125;&#125;</code></li>
</ul>
</li>
</ol>
</li>
<li><mark class="hl-label pink">更新方式</mark> ：
<ul>
<li>直接修改 <code>响应式引用</code> 的 <code>value</code> 属性值 <code>refobj.value++</code></li>
</ul>
</li>
<li>响应的数据只针对 <code>响应式引用</code> 的内部值<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// a是一个普通的基本类型数据，它本身不是响应式对象或者响应式引用，只有通过ref函数或者reactive函数创建的对象或者引用才具有响应式能力。</span><br><span class="hljs-comment">// 基本类型数据传参或赋值，则是一个新的值</span><br><span class="hljs-comment">// 代码中，b是一个响应式引用，当你改变b.value的值时，只会更新b自己的状态，而不会影响到a的值。</span><br><br><span class="hljs-keyword">let</span> a = <span class="hljs-number">2</span><br><span class="hljs-keyword">let</span> b = <span class="hljs-title function_">ref</span>(a)<br>b.<span class="hljs-property">value</span>++       <span class="hljs-comment">// a的值不会改变</span><br></code></pre></td></tr></table></figure></li>
</ol>
<blockquote>
<p>用法：</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;div&gt; &#123;&#123; refobj &#125;&#125; &lt;<span class="hljs-regexp">/div&gt;   /</span><span class="hljs-regexp">/ 不需要.value</span><br><span class="hljs-regexp"></span><br><span class="hljs-regexp"></span><br><span class="hljs-regexp">import &#123; ref &#125; form &#x27;vue&#x27;   /</span><span class="hljs-regexp">/ 引入 ref</span><br><span class="hljs-regexp"></span><br><span class="hljs-regexp">export default&#123;</span><br><span class="hljs-regexp">    setup()&#123;</span><br><span class="hljs-regexp">        let refobj = ref(123)       /</span><span class="hljs-regexp">/ 生成响应式引用</span><br><span class="hljs-regexp">        let a = refobj.value        /</span><span class="hljs-regexp">/ 获取响应式引用内部值</span><br><span class="hljs-regexp">        refobj.value++              /</span><span class="hljs-regexp">/ 更新响应式引用内部值</span><br><span class="hljs-regexp">    &#125;</span><br><span class="hljs-regexp">&#125;</span><br><span class="hljs-regexp"></span><br></code></pre></td></tr></table></figure>

<hr>
<h4 id="reactive"><a href="#reactive" class="headerlink" title="reactive( )"></a>reactive( )</h4><blockquote>
<p>作用</p>
</blockquote>
<p>将一个普通的 JavaScript 对象转化为一个 <code>响应式对象</code>，使得 <code>该对象</code> 的 <code>属性</code> 变化能够自动触发视图更新</p>
<blockquote>
<p>返回值</p>
</blockquote>
<ol>
<li>返回值称呼：<mark class="hl-label red">响应式对象</mark> </li>
<li>实现原理：将 <code>对象类型</code> 包括 <code>数组</code> 数据处理为响应式的 <code>proxy 代理对象</code></li>
</ol>
<blockquote>
<p>注意事项</p>
</blockquote>
<ol>
<li><code>响应式对象</code> 是深度监听的，即改变响应式对象的任意后代属性，都会进行响应</li>
<li><code>响应式对象</code> 属性的传递<ol>
<li><code>响应式对象</code> 其属性是 <code>对象</code>，当此属性作为值进行传递【赋值&#x2F;传参】，变量接收的是此属性引用，最终改变的还是 <code>响应式对象</code> 的属性，因此 <code>响应式对象</code> 依旧可以被监听到<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 这段代码中，a.job.sex的值会发生改变么？--会！！</span><br><span class="hljs-comment">// 因为a.job返回的是对job对象的引用，所以在更改b.sex时，实际上是更改a.job对象中的属性。</span><br><span class="hljs-comment">// 由于a.job是响应式对象的属性，所以更改会被跟踪并触发响应式更新。</span><br><span class="hljs-comment">// 因此，a.job.sex的值会发生改变</span><br><br><span class="hljs-keyword">let</span> a = <span class="hljs-title function_">reactive</span>(&#123;<br>    <span class="hljs-attr">job</span>:&#123;<br>        <span class="hljs-attr">sex</span>:<span class="hljs-number">1</span><br>    &#125;<br>&#125;)<br><span class="hljs-keyword">let</span> b = a.<span class="hljs-property">job</span><br>b.<span class="hljs-property">sex</span>++         <br></code></pre></td></tr></table></figure></li>
<li><code>响应式对象</code> 其属性是 <code>基本类型数据</code> ，当此属性作为值进行传递【赋值&#x2F;传参】，变量接收的是一个新值，更改变量的值不会使原 <code>响应式对象</code> 响应<ul>
<li>原理：响应式系统在创建响应式对象时会将其属性的值通过 Object.defineProperty 方法转换为 getter 和 setter 形式<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 这段代码中，a.job.sex的值会发生改变么？--不会！！</span><br><span class="hljs-comment">// 因为当取出响应式对象的基本类型属性赋值给其他变量时，变量接收到的是一个调用 getter 获取的新基本类型值。但是对属性的赋值调用的是 setter 会触发响应能力</span><br><span class="hljs-comment">// 所以对b的操作不会影响a.age的值</span><br><br><span class="hljs-keyword">let</span> a = <span class="hljs-title function_">reactive</span>(&#123;<br>    <span class="hljs-attr">age</span>:<span class="hljs-number">12</span><br>&#125;)<br><span class="hljs-keyword">let</span> b = a.<span class="hljs-property">age</span><br>b++         <br></code></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
</li>
</ol>
<blockquote>
<p>用法</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;template&gt;<br>    &#123;&#123; p.<span class="hljs-property">name</span> &#125;&#125;    <span class="hljs-comment">// 访问</span><br>&lt;/template&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">import</span> &#123; reactive &#125; form <span class="hljs-string">&quot;vue&quot;</span>   <span class="hljs-comment">// 引入api</span></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span>&#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>)&#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> p = <span class="hljs-title function_">reactive</span>(&#123;      <span class="hljs-comment">// 实例化响应式对象</span></span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-attr">name</span>:<span class="hljs-string">&quot;xxx&quot;</span></span></span><br><span class="language-javascript"><span class="language-xml">        &#125;)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p.<span class="hljs-property">name</span>)     <span class="hljs-comment">// 访问和赋值触发响应</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">return</span> &#123;p&#125;</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;</span></span><br><span class="language-javascript"><span class="language-xml">&#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><br><br></code></pre></td></tr></table></figure>

<hr>
<h4 id="ref-对比-reactive"><a href="#ref-对比-reactive" class="headerlink" title="ref 对比 reactive"></a>ref 对比 reactive</h4><blockquote>
<p>定义的数据</p>
</blockquote>
<ul>
<li><code>ref( )</code> 用来定义：<code>基本数据类型</code></li>
<li><code>reactive( )</code> 用来定义：<code>对象（或数组）类型数据</code></li>
<li>备注：<code>ref( )</code> 也可以用来定义 <code>对象（或数组）类型数据</code>，它内部会自动通过 <code>reeactive( )</code> 转为 <code>代理对象</code></li>
</ul>
<blockquote>
<p>实现原理</p>
</blockquote>
<ul>
<li><code>ref( )</code> 通过 <code>Object.defineProperty( )</code> 的 <code>get</code> 和 <code>set</code> 来实现响应式（数据劫持）</li>
<li><code>reactive( )</code> 通过使用 <code>Proxy</code> 来是实现响应式（数据劫持），并通过 <code>Reflect</code> 操作 <code>源对象</code> 内部数据</li>
</ul>
<blockquote>
<p>使用方式</p>
</blockquote>
<ul>
<li><code>ref( )</code> 定义的数据：操作数据需要 <code>.value</code>，读取数据时 <code>模板中</code> 直接读取 <code>不需要 .value</code></li>
<li><code>reactive( )</code> 定义的数据：操作数据与读取数据 <code>均不需要 .value</code></li>
</ul>
<hr>
<h4 id="toRef-x2F-toRefs"><a href="#toRef-x2F-toRefs" class="headerlink" title="toRef&#x2F;toRefs"></a>toRef&#x2F;toRefs</h4><blockquote>
<p>作用</p>
</blockquote>
<p>将响应式对象的基本类型属性转换为响应式引用的函数</p>
<blockquote>
<p>疑问</p>
</blockquote>
<ol>
<li>用处是什么<ul>
<li>响应式对象的基本类型属性，如果进行赋值、传参，变量接收到的数据将是一个新的基本类型数据，因此对变量的修改并不会触发响应式对象的响应能力</li>
<li>使用 <code>toRef()/toRefs</code> 将响应式对象的属性转换为响应式引用，并且对此响应式引用的内部值进行更改，也会影响响应式对象的属性，这是 <code>ref()</code> 做不到的</li>
</ul>
</li>
<li>为什么不用 <code>ref()</code> 函数进行转换<ul>
<li>如果将响应式对象的数据作为参数，调用 <code>ref()</code> 函数生成响应式引用，<code>ref()</code> 接收到的也是一个新的基本类型数据。</li>
<li>这个响应式引用将是一个独立的数据，响应能力只针对 <code>ref()</code> 返回的此响应式引用本身，并不会响应式改变响应式对象的属性值</li>
</ul>
</li>
</ol>
<blockquote>
<p>toRef 和 toRefs 区别</p>
</blockquote>
<ol>
<li><code>toRef()</code><ol>
<li>通过 <code>响应式对象</code> 的某一个属性，返回一个 <code>响应式引用</code></li>
<li>如果此属性是对象，则返回的 <code>响应式引用</code> 的 value 属性，指向实参 <code>响应式对象</code> 的对应属性</li>
</ol>
</li>
<li><code>toRefs()</code><ol>
<li>通过 <code>响应式对象</code> 返回由其属性生成的多个 <code>响应式引用</code> 组成的对象</li>
<li>属性名是 <code>响应式对象</code> 的属性名，值是对应转换的 <code>响应式引用</code></li>
<li>如果此属性是对象，则返回的 <code>响应式引用</code> 的 value 属性，指向实参 <code>响应式对象</code> 的对应属性</li>
</ol>
</li>
</ol>
<blockquote>
<p>注意事项</p>
</blockquote>
<ol>
<li>toRefs() 转换后的属性，需要在模板中使用 .value 来访问其值</li>
<li>如果直接将一个普通对象的属性传给 toRef，会抛出错误</li>
</ol>
<blockquote>
<p>用法</p>
</blockquote>
<mark class="hl-label red">toRef()</mark> 
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;template&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;&#123; aa.age &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>                     <span class="hljs-comment">// 引用式对象的属性会响应变化</span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">v-bind:click</span>=<span class="hljs-string">&quot;bb++&quot;</span>&gt;</span>按钮+<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>  <span class="hljs-comment">// 直接调用转换后的响应式引用</span><br>&lt;/template&gt;<br><br><span class="hljs-keyword">import</span> &#123; reactive,toRef &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>    <span class="hljs-comment">// 引用API</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">let</span> aa = <span class="hljs-title function_">reactive</span>(&#123;<br>      <span class="hljs-attr">name</span>:<span class="hljs-string">&quot;小明&quot;</span>,<br>      <span class="hljs-attr">age</span>:<span class="hljs-number">16</span><br>    &#125;)<br>    <span class="hljs-keyword">let</span> bb = <span class="hljs-title function_">toRef</span>(aa,<span class="hljs-string">&quot;age&quot;</span>)    <span class="hljs-comment">// 参数1：响应式对象。参数2：需要转换的属性（字符串）</span><br>    <span class="hljs-keyword">return</span> &#123;<br>      aa,<br>      bb<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<mark class="hl-label red">toRefs()</mark> 
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;template&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;&#123; aa.age &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>                               <span class="hljs-comment">// 引用式对象的属性会响应变化</span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">v-bind:click</span>=<span class="hljs-string">&quot;bb.age.value++&quot;</span>&gt;</span>按钮+<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>  <span class="hljs-comment">// 直接调用对应属性的响应式引用，且必须使用 value 属性</span><br>&lt;/template&gt;<br><br><span class="hljs-keyword">import</span> &#123; reactive,toRef &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>    <span class="hljs-comment">// 引用API</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">let</span> aa = <span class="hljs-title function_">reactive</span>(&#123;<br>      <span class="hljs-attr">name</span>:<span class="hljs-string">&quot;小明&quot;</span>,<br>      <span class="hljs-attr">age</span>:<span class="hljs-number">16</span><br>    &#125;)<br>    <span class="hljs-keyword">let</span> bb = <span class="hljs-title function_">toRefs</span>(aa)    <span class="hljs-comment">// 参数：响应式对象</span><br>    <span class="hljs-keyword">return</span> &#123;<br>      aa,<br>      bb<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<hr>
<h4 id="shallowRef-x2F-shallowReactive"><a href="#shallowRef-x2F-shallowReactive" class="headerlink" title="shallowRef&#x2F;shallowReactive"></a>shallowRef&#x2F;shallowReactive</h4><blockquote>
<p>作用</p>
</blockquote>
<p>进行浅层的数据响应，深层的数据不具有响应能力</p>
<ol>
<li><mark class="hl-label red">shallowRef</mark> 
<ol>
<li>用于生成浅层响应式引用</li>
<li>只对基本类型数据有效<ol>
<li>如果参数是对象，不会调用 <code>reactive</code> </li>
<li>生成的响应式引用其内部值，value 指向的只是普通object对象，不是 <code>响应式对象</code></li>
<li>因此修改此对象属性不具有响应效果</li>
</ol>
</li>
<li>直接修改响应式引用的内部值 value，会有响应式效果<ol>
<li>即：<code>refobj.value = xxx</code>，此种情况会触发响应</li>
<li>参数是对象，直接修改响应式引用的内部值 <code>refobj.value = xxx</code>，也会触发响应</li>
</ol>
</li>
</ol>
</li>
<li><mark class="hl-label red">shallowReactive</mark> 
<ol>
<li>用于生成浅层响应式对象</li>
<li>此 <code>响应式对象</code> 属性的修改，具有响应效果</li>
<li>此 <code>响应式对象</code> 属性的属性…的修改，不具有响应效果</li>
</ol>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; shallowRef,shallowReactive &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><br><span class="hljs-keyword">let</span> a = <span class="hljs-title function_">shallowRef</span>(<span class="hljs-number">11</span>)      <span class="hljs-comment">// 只对基本类型数据有效</span><br><span class="hljs-keyword">let</span> b = <span class="hljs-title function_">shallowReactive</span>(&#123;<br>    <span class="hljs-attr">name</span>:<span class="hljs-string">&quot;123&quot;</span>,             <span class="hljs-comment">// 具有响应效果</span><br>    <span class="hljs-attr">obj</span>:&#123;                   <span class="hljs-comment">// 具有响应效果（如果修改obj的值 b.obj = &#123;..&#125; | b.obj = 123）</span><br>        <span class="hljs-attr">sex</span>:<span class="hljs-number">456</span>             <span class="hljs-comment">// 不具有响应效果</span><br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>

<hr>
<h4 id="readonly-x2F-shallowReadonly"><a href="#readonly-x2F-shallowReadonly" class="headerlink" title="readonly&#x2F;shallowReadonly"></a>readonly&#x2F;shallowReadonly</h4><p>作用：传入参数 <code>响应式对象</code> 或 <code>响应式引用</code> ，返回一个 <code>新的</code> 只读的 <code>响应式对象</code></p>
<ul>
<li><code>readonly</code>：<ol>
<li>新的 <code>响应式对象</code> 的所有属性或值，都不具有响应效果</li>
<li>实参为 <code>响应式引用</code>，返回的新的 <code>响应式对象</code> 的用法和 <code>响应式引用</code> 用法相同。即：代码中用 value 属性，模板中不需要 value</li>
</ol>
</li>
<li><code>shallowReadonly</code><ol>
<li>实参为 <code>响应式对象</code>：<ol>
<li>返回的新的 <code>响应式对象</code> 的子属性不具有响应式，但是其后代属性具有响应效果</li>
<li><font color=green size=4> 并且响应效果关联传入的实参响应式对象。即修改孙子属性，新响应式对象触发响应，传入的实参响应式对象也会触发响应</font></li>
</ol>
</li>
<li>实参为 <code>响应式引用</code>：<ol>
<li>返回的新的 <code>响应式对象</code> 的内部值，不具有响应式效果</li>
<li>返回的新的 <code>响应式对象</code> 的用法和 <code>响应式引用</code> 用法相同。即：代码中用 value 属性，模板中不需要 value</li>
</ol>
</li>
</ol>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><br>&lt;template&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>b.obj.sex<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>                                <span class="hljs-comment">// 实参响应式对象触发响应效果</span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">v-bind:cleck</span>=<span class="hljs-string">&quot;f.obj.sex++&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>        <span class="hljs-comment">// 修改新的响应式对象的孙子属性</span><br>&lt;/template&gt;<br><br><span class="hljs-keyword">import</span> &#123;readonly,shallowReadonly&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span>&#123;<br>    <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-keyword">let</span> a = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">let</span> b = <span class="hljs-title function_">reactive</span>(&#123;<br>            <span class="hljs-attr">name</span>:<span class="hljs-string">&quot;xxx&quot;</span>,<br>            <span class="hljs-attr">obj</span>:&#123;<br>                <span class="hljs-attr">sex</span>:<span class="hljs-number">123</span><br>            &#125;<br>        &#125;)<br><br>        <span class="hljs-keyword">let</span> c = <span class="hljs-title function_">readonly</span>(a)     <span class="hljs-comment">// 修改c的值，a的内部值不具有响应效果</span><br>        <span class="hljs-keyword">let</span> d = <span class="hljs-title function_">readonly</span>(b)     <span class="hljs-comment">// 修改d的属性，b的属性不具有响应效果</span><br><br>        <span class="hljs-keyword">let</span> e = <span class="hljs-title function_">shallowReadonly</span>(a)     <span class="hljs-comment">// 修改e的值，a的内部值不具有响应效果</span><br>        <span class="hljs-keyword">let</span> f = <span class="hljs-title function_">shallowReadonly</span>(b)     <span class="hljs-comment">// 修改f的子属性，b的子属性不具有响应效果，但是修改f的孙子即之后属性，b的对应属性具有相应效果</span><br>        <br>        <span class="hljs-keyword">return</span>&#123;<br>            b,<br>            f<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<hr>
<h4 id="toRaw-x2F-markRaw"><a href="#toRaw-x2F-markRaw" class="headerlink" title="toRaw&#x2F;markRaw"></a>toRaw&#x2F;markRaw</h4><blockquote>
<p>toRaw</p>
</blockquote>
<p>作用：使用 <code>响应式对象</code> 作为参数，返回一个数据相同的非响应式普通对象</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><br><span class="hljs-keyword">import</span> &#123; ref,reactive,toRaw,markRaw &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">let</span> b = <span class="hljs-title function_">reactive</span>(&#123;<br>        <span class="hljs-attr">name</span>:<span class="hljs-string">&quot;xxx&quot;</span>,<br>        <span class="hljs-attr">age</span>:<span class="hljs-number">12</span>,<br>        <span class="hljs-attr">obj</span>:&#123;<br>            <span class="hljs-attr">sex</span>:<span class="hljs-number">123</span><br>        &#125;<br>    &#125;)<br>    <span class="hljs-keyword">let</span> c = <span class="hljs-title function_">toRaw</span>(b)    <span class="hljs-comment">// 返回一个数据相同的普通对象</span><br><br>    <span class="hljs-keyword">return</span> &#123;<br>      b,c<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>markRow</p>
</blockquote>
<p>作用：标记一个 <code>普通对象</code>，此对象将来不管是添加给 <code>响应式对象</code> 作为属性，还是使用 <code>reactive</code> 都不会是响应式</p>
<mark class="hl-label red">注意事项</mark> 
<p>此对象某属性是 <code>响应式对象</code> 或 <code>响应式引用</code>，即使对象被 <code>markRow</code> 标记，对象依旧可以被转换为 <code>响应式对象</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;template&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;&#123; c.age &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">v-bind:click</span>=<span class="hljs-string">&quot;ff&quot;</span>&gt;</span>按钮+<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br>&lt;/template&gt;<br><br><span class="hljs-keyword">import</span> &#123; ref,reactive,toRaw,markRaw &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">let</span> b = <span class="hljs-title function_">reactive</span>(&#123;<br>        <span class="hljs-attr">name</span>:<span class="hljs-string">&quot;xxx&quot;</span>,<br>        <span class="hljs-attr">age</span>:<span class="hljs-number">12</span>,<br>        <span class="hljs-attr">obj</span>:&#123;<br>            <span class="hljs-attr">sex</span>:<span class="hljs-number">123</span><br>        &#125;<br>    &#125;)<br>    <span class="hljs-keyword">let</span> c = &#123;<br>        <span class="hljs-attr">age</span>:<span class="hljs-number">18</span>,<br>        <span class="hljs-comment">//obj:ref(0)    // 如果属性是响应式，则此对象依旧可以被转换为响应式对象</span><br>    &#125;<br>    <span class="hljs-title function_">markRaw</span>(c)          <span class="hljs-comment">// 标记为普通对象</span><br>    c = <span class="hljs-title function_">reactive</span>(c)     <span class="hljs-comment">// 对象不会转换成响应对象</span><br><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">ff</span>(<span class="hljs-params"></span>)&#123;<br>      c.<span class="hljs-property">age</span>++           <span class="hljs-comment">// 不具有响应能力</span><br>    &#125;<br><br>    <span class="hljs-keyword">return</span> &#123;<br>      b,ff,c<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<hr>
<h4 id="customRef"><a href="#customRef" class="headerlink" title="customRef"></a>customRef</h4><mark class="hl-label red">作用</mark> 
<p>自定义 ref 函数，用来定制生成的数据其响应方式。即：可以自定义数据实现响应时的额外操作</p>
<mark class="hl-label red">用法</mark> 
<ol>
<li>引入 <code>customRef</code> 函数</li>
<li>自定义函数</li>
<li>函数中调用 <code>customRef</code> 函数<ol>
<li>参数：回调函数<ul>
<li>回调函数的参数<ol>
<li>track()：用于追踪数据，将组件实例和数据进行关联</li>
<li>trigger()：触发组件重新渲染，渲染时根据依赖列表重新加载数据</li>
</ol>
</li>
<li>回调函数的返回值：具有 getter&#x2F;setter 的对象<ol start="3">
<li>getter：<code>自定义响应式引用</code> 获取数据时调用</li>
<li>setter：<code>自定义响应式引用</code> 修改数据时调用</li>
</ol>
</li>
</ul>
</li>
<li>返回值：生成的 <code>自定义响应式引用</code></li>
</ol>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; customRef &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>                 <span class="hljs-comment">// 引入API</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">ff</span> (value)&#123;                        <span class="hljs-comment">// 自定义的ref函数</span><br>      <span class="hljs-keyword">return</span> <span class="hljs-title function_">customRef</span>(<span class="hljs-function">(<span class="hljs-params">track,trigger</span>)=&gt;</span>&#123;       <span class="hljs-comment">// 返回值为调用 customRef 函数的返回值</span><br>        <span class="hljs-keyword">return</span> &#123;                                <span class="hljs-comment">// customRef 回调函数返回值为 getter/setter 对象</span><br>          <span class="hljs-title function_">get</span>(<span class="hljs-params"></span>)&#123;<br>            <span class="hljs-title function_">track</span>()                             <span class="hljs-comment">// 追踪数据</span><br>            <span class="hljs-keyword">return</span> value<br>          &#125;,<br>          <span class="hljs-title function_">set</span>(<span class="hljs-params">newValue</span>)&#123;<br>            value = newValue<br>            <span class="hljs-title function_">trigger</span>()                           <span class="hljs-comment">// 触发渲染</span><br>          &#125;<br>        &#125;<br>      &#125;)<br>    &#125;<br><br>    <span class="hljs-keyword">let</span> a = <span class="hljs-title function_">ff</span>(<span class="hljs-number">0</span>)                               <span class="hljs-comment">// 生成响应式数据</span><br><br>    <span class="hljs-keyword">return</span> &#123;<br>      a<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<hr>
<h3 id="计算属性"><a href="#计算属性" class="headerlink" title="计算属性"></a>计算属性</h3><hr>
<h4 id="computed"><a href="#computed" class="headerlink" title="computed"></a>computed</h4><ol>
<li>作用：计算属性</li>
<li>引入：<code>import &#123;computed&#125; from vue</code></li>
<li>特征：<code>computed</code> 是一个函数</li>
<li>定义：在 <code>setup( )</code> 配置项中进行调用</li>
<li>执行时机<ol>
<li>初始化的时候</li>
<li>依赖数据发生改变时候</li>
</ol>
</li>
</ol>
<blockquote>
<p>完整定义</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&#123;&#123;person.<span class="hljs-property">name</span>&#125;&#125;<br>&#123;&#123;person.<span class="hljs-property">age</span>&#125;&#125;<br>&lt;input v-<span class="hljs-variable language_">module</span>=<span class="hljs-string">&quot;person.title&quot;</span>&gt;<br><br><span class="hljs-string">`import &#123;reactive,computed&#125; from &#x27;vue&#x27;`</span> <span class="hljs-comment">// 必须引入</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span>&#123;<br>    <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-keyword">let</span> person = <span class="hljs-title function_">reactive</span>(&#123;<br>            <span class="hljs-attr">name</span>:<span class="hljs-string">&quot;小明&quot;</span>,<br>            <span class="hljs-attr">age</span>:<span class="hljs-number">16</span><br>        &#125;)<br><br>        person.<span class="hljs-property">title</span> = <span class="hljs-title function_">computed</span>(&#123;   <span class="hljs-comment">//将计算属性给到响应数据，可以通过响应数据直接使用</span><br>            <span class="hljs-title function_">get</span>(<span class="hljs-params"></span>)&#123;<br>                <span class="hljs-keyword">return</span> person.<span class="hljs-property">name</span>+<span class="hljs-string">&quot;:&quot;</span>+person.<span class="hljs-property">age</span><br>            &#125;<br>            <span class="hljs-title function_">set</span>(<span class="hljs-params">val</span>)&#123;<br>                person.<span class="hljs-property">name</span> = val<br>            &#125;<br>        &#125;)<br><br>        <span class="hljs-keyword">return</span> &#123;<br>            preson<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>简写（只能读取，回调函数不能传参，会报错）</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&#123;&#123;person.<span class="hljs-property">title</span>&#125;&#125;<br><br><span class="hljs-string">`import &#123;reactive,computed&#125; from &#x27;vue&#x27;`</span> <span class="hljs-comment">// 必须引入</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span>&#123;<br>    <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-keyword">let</span> person = <span class="hljs-title function_">reactive</span>(&#123;<br>            <span class="hljs-attr">name</span>:<span class="hljs-string">&quot;小明&quot;</span>,<br>            <span class="hljs-attr">age</span>:<span class="hljs-number">16</span><br>        &#125;)<br><br>        person.<span class="hljs-property">title</span> = <span class="hljs-title function_">computed</span>(<span class="hljs-function">()=&gt;</span>&#123;   <span class="hljs-comment">// 回调函数不能传参，会报错</span><br>            <span class="hljs-keyword">return</span> person.<span class="hljs-property">name</span>+<span class="hljs-string">&quot;:&quot;</span>+person.<span class="hljs-property">age</span> <span class="hljs-comment">// 只能读取</span><br>        &#125;)<br><br>        <span class="hljs-keyword">return</span> &#123;<br>            preson<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<hr>
<h3 id="监视属性"><a href="#监视属性" class="headerlink" title="监视属性"></a>监视属性</h3><hr>
<h4 id="watch"><a href="#watch" class="headerlink" title="watch"></a>watch</h4><ol>
<li>作用：数据监视</li>
<li>引入：<code>import &#123; watch &#125; from vue</code></li>
<li>特征：<code>watch</code> 是一个函数</li>
<li>定义：在 <code>setup( )</code> 配置项中进行调用</li>
</ol>
<blockquote>
<p>监视 <code>ref</code> 响应数据</p>
</blockquote>
<ul>
<li>参数<ol>
<li>监听的属性</li>
<li>回调函数</li>
<li>配置项<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 引入需要的函数</span><br><span class="hljs-keyword">import</span> &#123; ref,watch &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>    <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-comment">// 定义 ref 响应式数据</span><br>        <span class="hljs-keyword">let</span> sum = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">let</span> msg = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">let</span> obj = <span class="hljs-title function_">ref</span>(&#123;<br>            <span class="hljs-attr">name</span>:<span class="hljs-string">&quot;小明&quot;</span>,<br>            <span class="hljs-attr">age</span>:<span class="hljs-number">12</span><br>        &#125;)<br><br>        <span class="hljs-comment">// 监听一个 ref 响应式数据</span><br>        <span class="hljs-title function_">watch</span>(sum,<span class="hljs-function">(<span class="hljs-params">newValue,oldValue</span>)=&gt;</span>&#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;新数据&quot;</span>,newValue)<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;旧数据&quot;</span>,oldValue)<br>        &#125;)<br><br>        <span class="hljs-comment">// 监听多个 ref 响应式数据</span><br>        <span class="hljs-title function_">watch</span>([sum,msg],<span class="hljs-function">(<span class="hljs-params">newValue,oldValue</span>)=&gt;</span>&#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;新数据&quot;</span>,newValue)  <span class="hljs-comment">// 新数据组成的数组，下标与 参数1 中监听的属性所在下标相对应</span><br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;旧数据&quot;</span>,oldValue)  <span class="hljs-comment">// 旧数据组成的数组，下标与 参数1 中监听的属性所在下标相对应</span><br>        &#125;)<br><br>        <span class="hljs-comment">// 配置监听方式</span><br>        <span class="hljs-title function_">watch</span>([sum,msg],<span class="hljs-function">(<span class="hljs-params">newValue,oldValue</span>)=&gt;</span>&#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;修改数据&quot;</span>,newValue,oldvalue)<br>        &#125;,&#123;<br>            <span class="hljs-attr">immediate</span>:<span class="hljs-literal">true</span>  <span class="hljs-comment">// 初始就监听一次</span><br>        &#125;)<br><br>        <span class="hljs-comment">// 监听 ref 定义的对象响应数据【方法一】</span><br>        <span class="hljs-comment">// ref 定义对象类型，其实调用了 reactive ，因此 obj.value 为 Proxy 类型对象</span><br>        <span class="hljs-title function_">watch</span>(obj.<span class="hljs-property">value</span>,<span class="hljs-function">(<span class="hljs-params">newValue,oldValue</span>)=&gt;</span>&#123;            <span class="hljs-comment">// obj.value 等同于监视 reactive 响应数据</span><br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;新数据&quot;</span>,newValue)<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;旧数据&quot;</span>,oldValue)<br>        &#125;)<br><br>        <span class="hljs-comment">// 监听 ref 定义的对象响应数据【方法二】</span><br>        <span class="hljs-comment">// ref 定义对象类型，其实调用了 reactive ，因此 obj.value 为 Proxy 类型对象</span><br>        <span class="hljs-title function_">watch</span>(obj,<span class="hljs-function">(<span class="hljs-params">newValue,oldValue</span>)=&gt;</span>&#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;新数据&quot;</span>,newValue)<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;旧数据&quot;</span>,oldValue)<br>        &#125;,&#123;<br>            <span class="hljs-attr">deep</span>:<span class="hljs-literal">true</span>   <span class="hljs-comment">// 需要开启深度监听才可实现</span><br>        &#125;)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
<blockquote>
<p>监视 <code>reactive</code> 响应数据</p>
</blockquote>
<mark class="hl-label red">监视&nbsp;reactive&nbsp;响应数据的注意事项：</mark> 
<ol>
<li>无法获取 oldValue 旧数据，newValue 和 oldValue 得到的数据都是新改变的数据。</li>
<li>强制开启了深度监视（监听属性的属性的属性…），即使配置监听参数（deep:false），依旧无效</li>
<li>监听 <code>reactive</code> 响应数据的某属性，属性必须为函数返回值<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 引入需要的函数</span><br><span class="hljs-keyword">import</span> &#123; reactive,watch &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>    <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-comment">// 定义 reactive 响应式数据</span><br>        <span class="hljs-keyword">let</span> sum = <span class="hljs-title function_">reactive</span>(&#123;<br>            <span class="hljs-attr">name</span>:<span class="hljs-string">&quot;小明&quot;</span>,<br>            <span class="hljs-attr">age</span>:<span class="hljs-number">12</span>,<br>            <span class="hljs-attr">obj</span>:&#123;<br>                <span class="hljs-attr">tx</span>:<span class="hljs-number">23</span><br>            &#125;<br>        &#125;)<br>        <span class="hljs-comment">// 监听 reactive 响应式数据</span><br>        <span class="hljs-title function_">watch</span>(sum,<span class="hljs-function">(<span class="hljs-params">newValue,oldValue</span>)=&gt;</span>&#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;新数据&quot;</span>,newValue)  <span class="hljs-comment">// 获取新改变的数据 sum</span><br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;旧数据&quot;</span>,oldValue)  <span class="hljs-comment">// 获取的还是新数据 sum</span><br>        &#125;)<br><br>        <span class="hljs-comment">// 监听 reactive 响应式数据中的某一个属性</span><br>        <span class="hljs-title function_">watch</span>(<span class="hljs-function">()=&gt;</span>sum.<span class="hljs-property">name</span>,<span class="hljs-function">(<span class="hljs-params">newValue,oldValue</span>)=&gt;</span>&#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;新数据&quot;</span>,newValue)  <span class="hljs-comment">// 获取的是新数据 sum.name</span><br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;旧数据&quot;</span>,oldValue)  <span class="hljs-comment">// 获取的是旧数据 sum.name</span><br>        &#125;)<br><br>        <span class="hljs-comment">// 监听 reactive 响应式数据中的多个属性</span><br>        <span class="hljs-title function_">watch</span>([<span class="hljs-function">()=&gt;</span>sum.<span class="hljs-property">name</span>,<span class="hljs-function">()=&gt;</span>sum.<span class="hljs-property">age</span>],<span class="hljs-function">(<span class="hljs-params">newValue,oldValue</span>)=&gt;</span>&#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;新数据&quot;</span>,newValue)  <span class="hljs-comment">// 新数据组成的数组，下标与 参数1 中监听的属性所在下标相对应 [sum.name,sum.age]</span><br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;旧数据&quot;</span>,oldValue)  <span class="hljs-comment">// 旧数据组成的数组，下标与 参数1 中监听的属性所在下标相对应 [sum.name,sum.age]</span><br>        &#125;)<br><br>        <span class="hljs-comment">// 监听 reactive 响应式数据中的后代对象属性（属性(obj)=&gt;属性(obj)=&gt;属性(obj)...），必须配置配置项【deep:true】</span><br>        <span class="hljs-title function_">watch</span>(<span class="hljs-function">()=&gt;</span>sum.<span class="hljs-property">obj</span>,<span class="hljs-function">(<span class="hljs-params">newValue,oldValue</span>)=&gt;</span>&#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;新数据&quot;</span>,newValue)  <span class="hljs-comment">// 都获取的是新数据</span><br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;旧数据&quot;</span>,oldValue)  <span class="hljs-comment">// 都获取的是新数据</span><br>        &#125;,&#123;<br>            <span class="hljs-attr">deep</span>:<span class="hljs-literal">true</span>   <span class="hljs-comment">// 必须配置，如此才可以进行单独监听 reactive 响应式数据的后代对象属性 sum.obj</span><br>        &#125;)<br><br>        <span class="hljs-comment">// 监听 reactive 响应式数据中的后代基本类型属性（属性(obj)=&gt;属性(obj)=&gt;属性(基本类型)...），无需配置【deep】</span><br>        <span class="hljs-title function_">watch</span>(<span class="hljs-function">()=&gt;</span>sum.<span class="hljs-property">obj</span>.<span class="hljs-property">tx</span>,<span class="hljs-function">(<span class="hljs-params">newValue,oldValue</span>)=&gt;</span>&#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;新数据&quot;</span>,newValue)  <span class="hljs-comment">// 获取的是新数据 sum.obj.tx</span><br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;旧数据&quot;</span>,oldValue)  <span class="hljs-comment">// 获取的是旧数据 sum.obj.tx</span><br>        &#125;)                                 <span class="hljs-comment">//  无需配置配置项【deep:true】</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ol>
<hr>
<h4 id="watchEffect"><a href="#watchEffect" class="headerlink" title="watchEffect"></a>watchEffect</h4><ol>
<li>watchEffect 是一个函数</li>
<li>参数为一个回调函数</li>
<li>作用：根据回调函数中用到的属性，自动进行监视<ol>
<li>回调函数中用到了某属性，当属性值发生改变，回调函数将被触发</li>
<li><font color=red>只针是基本类型的属性，当属性的值发生改变，并且回调函数使用了此属性，则回调函数才会被触发</font></li>
<li>当属性是引用类型，回调函数中使用了此属性，但是修改的是此引用属性的属性，则回调函数不会被触发</li>
</ol>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; ref,reactive,watchEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><br>&lt;button v-<span class="hljs-attr">on</span>:click=<span class="hljs-string">&quot;sum++&quot;</span>&gt;按钮&lt;/button&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">v-on:click</span>=<span class="hljs-string">&quot;obj.gz++&quot;</span>&gt;</span>按钮<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>    <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-keyword">let</span> sum = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">let</span> obj = <span class="hljs-title function_">reactive</span>(&#123;<br>            <span class="hljs-attr">name</span>:<span class="hljs-string">&quot;张三&quot;</span>,<br>            <span class="hljs-attr">job</span>:&#123;<br>                <span class="hljs-attr">gz</span>:<span class="hljs-number">1</span><br>            &#125;<br>        &#125;)<br><br>        <span class="hljs-comment">// 监听属性</span><br>        <span class="hljs-title function_">watchEffect</span>(<span class="hljs-function">()=&gt;</span>&#123;<br>            <span class="hljs-keyword">let</span> a = sum.<span class="hljs-property">value</span>   <span class="hljs-comment">// 回调函数中用到了 sum，当 sum 值发生改变就会触发此回调函数</span><br>            <span class="hljs-keyword">let</span> b = obj         <span class="hljs-comment">// 点击按钮修改的是 obj.job.gz 的值，回调函数引用的是 obj ，因此点击按钮修改数据【不会触发此回调函数】</span><br>            <span class="hljs-keyword">let</span> c = obj.<span class="hljs-property">jbo</span>.<span class="hljs-property">gz</span>  <span class="hljs-comment">// 点击按钮修改的是 obj.job.gz 的值，并且回调函数引用的是 obj.job.gz，所以当点击按钮修改数据【会触发此回调函数】</span><br>        &#125;)<br><br>        <span class="hljs-keyword">return</span> &#123;<br>            sum,<br>            obj<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<hr>
<h3 id="数据通信"><a href="#数据通信" class="headerlink" title="数据通信"></a>数据通信</h3><hr>
<h4 id="provide-x2F-inject"><a href="#provide-x2F-inject" class="headerlink" title="provide&#x2F;inject"></a>provide&#x2F;inject</h4><mark class="hl-label red">作用</mark> 
<ol>
<li>用于祖组件向后代组件传递数据（不能用于子组件向祖先组件传递数据）</li>
<li>组件之间是嵌套调用的关系 祖&gt;子&gt;后代</li>
<li>父子组件一般使用 <code>props</code> 进行数据传递</li>
</ol>
<mark class="hl-label red">用法</mark> 
<ol>
<li>祖组件引入 <code>provide</code> 函数</li>
<li>祖组件调用 <code>provide(&quot;别名&quot;,数据)</code> 提供传输的数据</li>
<li>后代组件引入 <code>inject</code> 函数</li>
<li>后代组件调用 <code>inject(&quot;别名&quot;)</code> 获取祖组件提供的数据</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//---------------祖组件---------------</span><br><br><span class="hljs-keyword">import</span> &#123; provide &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>    <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-keyword">let</span> a = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)<br>        <span class="hljs-title function_">provide</span>(<span class="hljs-string">&quot;aa&quot;</span>,a)<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//----------------end-----------------</span><br><br><span class="hljs-comment">//---------------后代组件---------------</span><br><br><span class="hljs-keyword">import</span> &#123; inject &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>    <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-keyword">let</span> aa = <span class="hljs-title function_">inject</span>(<span class="hljs-string">&quot;aa&quot;</span>)<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;aa&quot;</span>)<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//---------------- end-----------------</span><br><br></code></pre></td></tr></table></figure>

<hr>
<h4 id="props"><a href="#props" class="headerlink" title="props"></a>props</h4><ol>
<li>使用选项式API，则使用 <code>props</code> 配置项进行配置</li>
<li>使用组合式API配合 <code>&lt;script setup&gt;</code> 标签，则使用 <code>defineProps</code> 函数接收 <code>props</code> 数据</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;script setup&gt;<br><span class="hljs-keyword">import</span> &#123; defineProps &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><br><span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>(&#123;<br>  <span class="hljs-attr">msg</span>: <span class="hljs-title class_">String</span>,<br>  <span class="hljs-attr">msg2</span>:<span class="hljs-title class_">Function</span><br>&#125;)<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(props.<span class="hljs-property">msg</span>) <span class="hljs-comment">// 访问 props 中的 msg 属性</span><br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>

<hr>
<h4 id="父组件获取子组件实例和数据"><a href="#父组件获取子组件实例和数据" class="headerlink" title="父组件获取子组件实例和数据"></a>父组件获取子组件实例和数据</h4><ol>
<li>父组件 html 中调用子组件</li>
<li>子组件定义实例上定义 <code>ref</code> 属性</li>
<li>子组件如果使用 <code>&lt;script setup&gt;</code> 标签，则需要手动暴露数据<ul>
<li><code>defineExpose(&#123; aa,bb,cc &#125;)</code></li>
</ul>
</li>
<li>父组件通过定义相同 ref 属性名变量的响应数据获取子组件实例</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 父组件 --&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">let</span> zzj = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)</span><br><span class="language-javascript">    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(zzj.<span class="hljs-property">value</span>)  <span class="hljs-comment">// 获取子组件实例</span></span><br><span class="language-javascript">    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(zzj.<span class="hljs-property">value</span>.<span class="hljs-title function_">fn</span>())  <span class="hljs-comment">// 调用子组件中方法</span></span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">child</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;zzj&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">child</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br></code></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 子组件 --&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;yyyyyyy&quot;</span>)</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">    <span class="hljs-title function_">defineExpose</span>(&#123;  <span class="hljs-comment">// 手动暴露子组件中数据</span></span><br><span class="language-javascript">        fn</span><br><span class="language-javascript">    &#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<hr>
<h3 id="判断响应式数据"><a href="#判断响应式数据" class="headerlink" title="判断响应式数据"></a>判断响应式数据</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><br><span class="hljs-keyword">import</span> &#123;isRef,isReactive,isReadonly,isProxy&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><br><span class="hljs-title function_">isRef</span>(...)         <span class="hljs-comment">// 判断值是否是 `ref` 创建的响应式引用</span><br><span class="hljs-title function_">isReactive</span>(...)    <span class="hljs-comment">// 判断值是否是 `reactive` 创建的响应式对象</span><br><span class="hljs-title function_">isReadonly</span>(...)    <span class="hljs-comment">// 判断值是否是 `readonly` 创建的只读的响应式对象</span><br><span class="hljs-title function_">isProxy</span>(...)       <span class="hljs-comment">// 判断值是否是 `reactive` 或 `readonly` 创建的代理数据</span><br><br></code></pre></td></tr></table></figure>

<hr>
<h1 id="hook"><a href="#hook" class="headerlink" title="hook"></a>hook</h1><p>官方资料：<a target="_blank" rel="noopener" href="https://cn.vuejs.org/guide/reusability/composables.html">https://cn.vuejs.org/guide/reusability/composables.html</a></p>
<p>hook 是一个函数，叫做 <mark class="hl-label red">组合式函数</mark> ，是使用 <strong>组合式API</strong> 封装的函数</p>
<ol>
<li>利用 Vue 的组合式 API 来封装的 <strong>有状态逻辑的函数</strong></li>
<li>特征：<ol>
<li>普通函数在调用后，只能获取函数当前处理的数据</li>
<li>使用组合式 API 生成的 <strong>组合式函数</strong>，执行一次后可以持续修改或判断其返回的值（因为使用了相应的组合式API，使数据成为了动态绑定数据等效果）</li>
</ol>
</li>
<li>用法：<ol>
<li>创建 hook 目录（非强制）</li>
<li>目录中创建相关 js 文件，文件名常以 <code>use</code> 开头（非强制）</li>
<li>js 文件引入相关 <code>组合式API</code></li>
<li>js 文件中暴露使用了 <code>组合式API</code> 的自定义函数 <code>组合式函数</code></li>
<li>其他组件就可以引用这个 <code>组合式函数</code></li>
</ol>
</li>
</ol>
<hr>
<h1 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h1><hr>
<h2 id="fragment"><a href="#fragment" class="headerlink" title="fragment"></a>fragment</h2><p>vue2 中需要一个根节点，但是 vue3 可以有多个根节点，原因是在虚拟dom中有一个 <fragent> 标签作为根节点，此节点不参与渲染</p>
<hr>
<h2 id="teleport"><a href="#teleport" class="headerlink" title="teleport"></a>teleport</h2><mark class="hl-label red">作用</mark> 
<p>将其定义的组件在指定元素下渲染。作为指定元素的最后一个子元素</p>
<mark class="hl-label red">特点</mark> 
<ol>
<li><code>&lt;teleport&gt;</code> 只改变了渲染的 DOM 结构，它不会影响组件间的逻辑关系，只会影响 DOM 结构和 CSS 样式</li>
<li><code>&lt;teleport&gt;</code> 可以有多个根元素</li>
<li><code>to</code> 的值可以是一个 CSS 选择器字符串，也可以是一个 DOM 元素对象</li>
<li><code>to</code> 属性值发生改变就会重新渲染。即：<code>to</code> 属性值绑定响应数据，改变值就可随时改变元素所在位置</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 在 body 元素下渲染元素 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">Teleport</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;body&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;open&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;modal&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Hello from the modal!<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;open = false&quot;</span>&gt;</span>Close<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">Teleport</span>&gt;</span><br><br></code></pre></td></tr></table></figure>

<hr>
<h2 id="suspense"><a href="#suspense" class="headerlink" title="suspense"></a>suspense</h2><mark class="hl-label red">作用</mark> 
<p>当子组件是通过异步加载方式进行加载，可以控制子组件未加载成功的显示内容</p>
<mark class="hl-label red">特点</mark> 
<ol>
<li>使用异步加载子组件，并且使用 <code>&lt;suspense&gt;</code> 进行处理，子组件的 <code>setup</code> 可以是 <code>async</code> 函数，返回值为 <code>proxy</code> 对象，成功状态值为 <code>响应类型数据</code></li>
<li>为什么使用：当子组件未加载完成，祖先组件都将不会显示。使用之后可以先显示祖先组件</li>
</ol>
<mark class="hl-label red">用法</mark> 
<ol>
<li>导入异步引入组件函数 <code>import &#123; defineAsyncComponent &#125; from &#39;vue&#39;</code></li>
<li>调用函数异步引入组件 <code>const child = defineAsyncComponent(()=&gt;import(&quot;./child.vue&quot;))</code></li>
<li>使用 <code>&lt;suspense&gt;</code> 组件处理子组件</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><br>&lt;suspense&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-slot:default</span>&gt;</span>       // 当组件加载成功显示组件 v-slot:default 固定写法</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">child</span>/&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-slot:fallback</span>&gt;</span>      // 当组件未加载成功显示组件 v-slot:default 固定写法</span><br><span class="language-xml">        请稍等，还未加载完成！</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br>&lt;/suuspense&gt;<br><br><br><span class="hljs-keyword">import</span> &#123; defineAsyncComponent &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>                          <span class="hljs-comment">// 导入用来异步引入组件的函数</span><br><br><span class="hljs-keyword">const</span> child = <span class="hljs-title function_">defineAsyncComponent</span>(<span class="hljs-function">()=&gt;</span><span class="hljs-title function_">import</span>(<span class="hljs-string">&quot;./child.vue&quot;</span>))       <span class="hljs-comment">// 调用函数，参数为回调函数，返回值为 import 函数返回值</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span>&#123;<br>    <span class="hljs-attr">components</span>:&#123;child&#125;                                              <span class="hljs-comment">// 绑定组件</span><br>&#125;<br></code></pre></td></tr></table></figure>

<hr>
<h1 id="其他改变"><a href="#其他改变" class="headerlink" title="其他改变"></a>其他改变</h1><mark class="hl-label red">全局组件转移</mark> 

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// vue2                     // vue3</span><br><span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">xxx</span>              app.<span class="hljs-property">config</span>.<span class="hljs-property">xxx</span><br><span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span>    移除（生产环境提示）<br><span class="hljs-title class_">Vue</span>.<span class="hljs-property">component</span>               app.<span class="hljs-property">component</span><br><span class="hljs-title class_">Vue</span>.<span class="hljs-property">directive</span>               app.<span class="hljs-property">directive</span><br><span class="hljs-title class_">Vue</span>.<span class="hljs-property">mixin</span>                   app.<span class="hljs-property">mixin</span><br><span class="hljs-title class_">Vue</span>.<span class="hljs-property">use</span>                     app.<span class="hljs-property">use</span><br><span class="hljs-title class_">Vue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>               app.<span class="hljs-property">config</span>.<span class="hljs-property">globalProperties</span><br><br></code></pre></td></tr></table></figure>

<mark class="hl-label red">data配置项</mark> 

<p>data配置项必须是函数</p>
<mark class="hl-label red">过渡类名</mark> 

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-comment">/* vue2 */</span>      <span class="hljs-comment">/* vue3 */</span><br><span class="hljs-selector-class">.v-enter</span>        <span class="hljs-selector-class">.v-enter-from</span><br><span class="hljs-selector-class">.v-enter-to</span>     <span class="hljs-selector-class">.v-enter-to</span><br><span class="hljs-selector-class">.v-leave</span>        <span class="hljs-selector-class">.v-leave-from</span><br><span class="hljs-selector-class">.v-leave-to</span>     <span class="hljs-selector-class">.v-leave-to</span><br></code></pre></td></tr></table></figure>

<mark class="hl-label red">移除</mark> 

<ol>
<li>keyCode作为 v-on 的修饰符，也不再支持 config.keyCodes</li>
<li>v-on.native 修饰符【 vue3中子组件只要不使用 <code>emits</code> 接收就不认为是自定义事件 】</li>
<li>过滤器 <code>filter</code> 【 vue3中都用计算属性 】</li>
</ol>
<hr>
<h1 id="实现原理"><a href="#实现原理" class="headerlink" title="实现原理"></a>实现原理</h1><hr>
<h2 id="响应式原理"><a href="#响应式原理" class="headerlink" title="响应式原理"></a>响应式原理</h2><blockquote>
<p>vue2 响应式原理</p>
</blockquote>
<ul>
<li>对象类型：通过 <code>Object.defineProperty( )【get/set】</code> 对属性的读取、修改进行拦截<code>（数据劫持）</code><ul>
<li>不会触发响应的情况：通过调用对象属性的方式，添加&#x2F;删除 属性，界面不会更新</li>
</ul>
</li>
<li>数组类型：通过重写数组的相关方法来实现拦截<ul>
<li>不会触发响应的情况：直接通过数组下标修改数组元素，界面不会更新</li>
</ul>
</li>
</ul>
<blockquote>
<p>vue3 响应式原理</p>
</blockquote>
<ul>
<li>通过 <code>Proxy（代理）</code>：拦截对象中任意属性的变化<ul>
<li>对象属性进行 <em><strong>增删改查</strong></em> 操作时，可自定义执行相关操作</li>
<li>不使用 <code>Object.defineProperty</code> 进行数据劫持，是因为会出现无法触发响应的情况</li>
</ul>
</li>
<li>通过 <code>Refiect（反射）</code>：对 <em><strong>源对象</strong></em> 的属性进行操作<ul>
<li>如 Object.defineProperty(obj, name, desc)在无法定义属性时，会抛出一个错误，而Reflect.defineProperty(obj, name, desc)则会返回false</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> person = &#123;<br>    <span class="hljs-attr">name</span>:<span class="hljs-string">&quot;小明&quot;</span>,<br>    <span class="hljs-attr">age</span>:<span class="hljs-number">16</span><br>&#125;<br><br><span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(person,&#123;<br>    <span class="hljs-comment">// 【读取】：属性时调用</span><br>    <span class="hljs-comment">// target：操作的对象（person）</span><br>    <span class="hljs-comment">// propName：操作的属性名（string类型）</span><br>    <span class="hljs-title function_">get</span>(<span class="hljs-params">target,propName</span>)&#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(target,propName) <span class="hljs-comment">// &#123;name:&quot;小明&quot;,age:16&#125;,&quot;name&quot;</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target,propName) <span class="hljs-comment">// 相当于 target[propNamme]</span><br>    &#125;,<br><br>    <span class="hljs-comment">// 【修改、添加】：属性时调用</span><br>    <span class="hljs-comment">// target：操作的对象（person）</span><br>    <span class="hljs-comment">// propName：操作的属性名（string类型）</span><br>    <span class="hljs-comment">// value：添加修改的属性值</span><br>    <span class="hljs-title function_">set</span>(<span class="hljs-params">target,propName,value</span>)&#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(target,propName,value)  <span class="hljs-comment">// &#123;name:&quot;小明&quot;,age:16&#125;,&quot;name&quot;,&quot;小刚&quot;</span><br>        <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">set</span>(target,propName,value) <span class="hljs-comment">// 相当于 target[propNamme] = value</span><br>    &#125;<br><br>    <span class="hljs-comment">// 【删除】：属性时的操作</span><br>    <span class="hljs-title function_">deleteProperty</span>(<span class="hljs-params">target,propName</span>)&#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;删除了某个属性&quot;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">deleteProperty</span>(target,propName) <span class="hljs-comment">// // 相当于 delete target[propNamme]</span><br>    &#125;<br>&#125;)<br><br></code></pre></td></tr></table></figure>

<hr>
<h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><mark class="hl-label red">优先级</mark> 
<ol>
<li>setup</li>
<li>beforeCreate（配置项）</li>
<li>created（配置项）</li>
<li>onBeforeMount</li>
<li>beforeMount（配置项）</li>
<li>onMounted</li>
<li>mounted（配置项）</li>
<li>onBeforeUpdate</li>
<li>updated（配置项）</li>
<li>onBeforeUnmount</li>
<li>beforeUnmount（配置项）</li>
<li>onUnmounted</li>
<li>unmounted（配置项）</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">// 引入需要的 API</span></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; onBeforeMount,onMounted,onBeforeUpdate,onUpdated,onBeforeUnmount,onUnmounted &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>)&#123;    <span class="hljs-comment">// 初始化生命周期、事件、数据监测、数据代理</span></span><br><span class="language-javascript">        ...</span><br><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-comment">// 通过组合式API，设置生命周期钩子函数</span></span><br><span class="language-javascript">        <span class="hljs-comment">// beforeCreate() 和 create() 没有对应组合式 API，这两个钩子函数就对应 setup() 钩子函数</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-title function_">onBeforeMount</span>(<span class="hljs-function">()=&gt;</span>&#123;...&#125;)    <span class="hljs-comment">//生成虚拟DOM之后</span></span><br><span class="language-javascript">        <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">()=&gt;</span>&#123;...&#125;)        <span class="hljs-comment">//虚拟DOM挂载到页面之后</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-title function_">onBeforeUpdate</span>(<span class="hljs-function">()=&gt;</span>&#123;...&#125;)   <span class="hljs-comment">//修改数据之后</span></span><br><span class="language-javascript">        <span class="hljs-title function_">onUpdated</span>(<span class="hljs-function">()=&gt;</span>&#123;...&#125;)        <span class="hljs-comment">//修改数据并且渲染到页面后</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-title function_">onBeforeUnmount</span>(<span class="hljs-function">()=&gt;</span>&#123;...&#125;)  <span class="hljs-comment">//调用销毁Vue实例函数，但在实际销毁Vue实例之前</span></span><br><span class="language-javascript">        <span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">()=&gt;</span>&#123;...&#125;)      <span class="hljs-comment">//实际销毁Vue实例之后</span></span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript"></span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">// 通过配置项方式设置生命周期钩子函数</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-title function_">beforeCreate</span>(<span class="hljs-params"></span>)&#123;&#125;, <span class="hljs-comment">//初始化生命周期、事件之后</span></span><br><span class="language-javascript">    <span class="hljs-title function_">created</span>(<span class="hljs-params"></span>)&#123;&#125;,  <span class="hljs-comment">//初始化数据监测、数据代理之后</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-title function_">beforeMount</span>(<span class="hljs-params"></span>)&#123;&#125;,  <span class="hljs-comment">//生成虚拟DOM之后</span></span><br><span class="language-javascript">    <span class="hljs-title function_">mounted</span>(<span class="hljs-params"></span>)&#123;&#125;,  <span class="hljs-comment">//虚拟DOM挂载到页面之后</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-title function_">beforeUpdate</span>(<span class="hljs-params"></span>)&#123;&#125;, <span class="hljs-comment">//修改数据之后</span></span><br><span class="language-javascript">    <span class="hljs-title function_">updated</span>(<span class="hljs-params"></span>)&#123;&#125;,  <span class="hljs-comment">//修改数据并且渲染到页面后</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-title function_">beforeUnmount</span>(<span class="hljs-params"></span>)&#123;&#125;,  <span class="hljs-comment">//调用销毁Vue实例函数，但在实际销毁Vue实例之前</span></span><br><span class="language-javascript">    <span class="hljs-title function_">unmounted</span>(<span class="hljs-params"></span>)&#123;&#125; <span class="hljs-comment">//实际销毁Vue实例之后</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://updownqs.tk">蚂蚁</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://updownqs.tk/2023/02/05/Vue3/">http://updownqs.tk/2023/02/05/Vue3/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://updownqs.tk" target="_blank">蚂蚁图书馆</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Vue/">Vue</a></div><div class="post_share"><div class="social-share" data-image="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/gh/overtrue/share.js@master/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/02/18/Docker/"><img class="prev-cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Docker</div></div></a></div><div class="next-post pull-right"><a href="/2023/01/20/uni-app/"><img class="next-cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">uni-app</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2022/07/20/Vue%E9%97%AE%E9%A2%98/" title="Vue问题"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-07-20</div><div class="title">Vue问题</div></div></a></div><div><a href="/2022/07/20/Vue%E7%AC%94%E8%AE%B0/" title="Vue笔记"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-07-20</div><div class="title">Vue笔记</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%B7%A5%E7%A8%8B"><span class="toc-text">创建工程</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#vue-cli-%E5%88%9B%E5%BB%BA"><span class="toc-text">vue-cli 创建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vite-%E5%88%9B%E5%BB%BA"><span class="toc-text">vite 创建</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#main-js"><span class="toc-text">main.js</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%A7%84%E8%8C%83"><span class="toc-text">规范</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#vue-%E6%96%87%E4%BB%B6"><span class="toc-text">.vue 文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#template-%E6%A8%A1%E6%9D%BF"><span class="toc-text">template 模板</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#API"><span class="toc-text">API</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E5%90%88%E5%BC%8F-API-Composition"><span class="toc-text">组合式 API (Composition)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#setup"><span class="toc-text">setup( )</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E5%93%8D%E5%BA%94%E6%95%B0%E6%8D%AE"><span class="toc-text">定义响应数据</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ref"><span class="toc-text">ref( )</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#reactive"><span class="toc-text">reactive( )</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ref-%E5%AF%B9%E6%AF%94-reactive"><span class="toc-text">ref 对比 reactive</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#toRef-x2F-toRefs"><span class="toc-text">toRef&#x2F;toRefs</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#shallowRef-x2F-shallowReactive"><span class="toc-text">shallowRef&#x2F;shallowReactive</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#readonly-x2F-shallowReadonly"><span class="toc-text">readonly&#x2F;shallowReadonly</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#toRaw-x2F-markRaw"><span class="toc-text">toRaw&#x2F;markRaw</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#customRef"><span class="toc-text">customRef</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7"><span class="toc-text">计算属性</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#computed"><span class="toc-text">computed</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%91%E8%A7%86%E5%B1%9E%E6%80%A7"><span class="toc-text">监视属性</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#watch"><span class="toc-text">watch</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#watchEffect"><span class="toc-text">watchEffect</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1"><span class="toc-text">数据通信</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#provide-x2F-inject"><span class="toc-text">provide&#x2F;inject</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#props"><span class="toc-text">props</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%88%B6%E7%BB%84%E4%BB%B6%E8%8E%B7%E5%8F%96%E5%AD%90%E7%BB%84%E4%BB%B6%E5%AE%9E%E4%BE%8B%E5%92%8C%E6%95%B0%E6%8D%AE"><span class="toc-text">父组件获取子组件实例和数据</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A4%E6%96%AD%E5%93%8D%E5%BA%94%E5%BC%8F%E6%95%B0%E6%8D%AE"><span class="toc-text">判断响应式数据</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#hook"><span class="toc-text">hook</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6"><span class="toc-text">组件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#fragment"><span class="toc-text">fragment</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#teleport"><span class="toc-text">teleport</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#suspense"><span class="toc-text">suspense</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E6%94%B9%E5%8F%98"><span class="toc-text">其他改变</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="toc-text">实现原理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86"><span class="toc-text">响应式原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-text">生命周期</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By 蚂蚁</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js"></script><div class="js-pjax"><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>